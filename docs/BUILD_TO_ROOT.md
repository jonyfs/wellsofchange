# ğŸ“¦ Build to Root Directory

## âœ… Nova ConfiguraÃ§Ã£o

O projeto foi reconfigurado para gerar os assets **diretamente no diretÃ³rio raiz** (`/`) em vez de `dist/public/`.

---

## ğŸ¯ O Que Mudou

### Antes âŒ
```
dist/
â””â”€â”€ public/
    â”œâ”€â”€ index.html
    â”œâ”€â”€ 404.html
    â”œâ”€â”€ favicon.png
    â”œâ”€â”€ .nojekyll
    â””â”€â”€ assets/
```

### Agora âœ…
```
/ (raiz do projeto)
â”œâ”€â”€ index.html           â† Gerado automaticamente
â”œâ”€â”€ 404.html             â† Gerado automaticamente
â”œâ”€â”€ favicon.png          â† Gerado automaticamente
â”œâ”€â”€ .nojekyll            â† Gerado automaticamente
â””â”€â”€ assets/              â† Gerado automaticamente
    â”œâ”€â”€ index-[hash].js
    â”œâ”€â”€ index-[hash].css
    â””â”€â”€ [imagens].jpg
```

---

## ğŸ”§ Como Funciona

### Scripts Criados

#### 1. `build-to-root.sh` (Principal)
ConstrÃ³i o site e move os assets para a raiz.

```bash
./build-to-root.sh --github   # Para GitHub Pages
./build-to-root.sh --local    # Para teste local
```

#### 2. `move-to-root.sh` (Auxiliar)
Move os arquivos de `dist/public/` para a raiz.

```bash
./move-to-root.sh
```

---

## ğŸ“‹ Comandos Atualizados

### Build e Preview Local
```bash
./preview-build.sh
```
**O que faz**:
1. âœ… Executa `build-to-root.sh --local`
2. âœ… Move assets para raiz
3. âœ… Inicia servidor HTTP na porta 8080
4. âœ… Serve arquivos da raiz

### Deploy para GitHub Pages
```bash
./deploy.sh
```
**O que faz**:
1. âœ… Executa `build-to-root.sh --github`
2. âœ… Move assets para raiz
3. âœ… Faz deploy usando `gh-pages` da raiz

---

## ğŸ—‚ï¸ Arquivos Ignorados no Git

O `.gitignore` foi atualizado para ignorar os build artifacts na raiz:

```gitignore
# Build artifacts in root (generated by build-to-root.sh)
/index.html
/404.html
/favicon.png
/.nojekyll
/assets
```

**Importante**: Estes arquivos sÃ£o gerados automaticamente durante o build e nÃ£o devem ser commitados no repositÃ³rio.

---

## ğŸš€ GitHub Actions Atualizado

O workflow `.github/workflows/deploy.yml` foi atualizado:

```yaml
- name: Build frontend for GitHub Pages
  run: npx vite build --base=/wellsofchange/

- name: Move build assets to root
  run: |
    chmod +x move-to-root.sh
    ./move-to-root.sh

- name: Upload artifact
  uses: actions/upload-pages-artifact@v3
  with:
    path: .  # â† Agora usa raiz em vez de dist/public
```

---

## ğŸ“Š Estrutura do Projeto

```
wellsofchange/
â”œâ”€â”€ client/              â† CÃ³digo fonte (nÃ£o muda)
â”œâ”€â”€ server/              â† Backend (nÃ£o muda)
â”œâ”€â”€ docs/                â† DocumentaÃ§Ã£o
â”œâ”€â”€ attached_assets/     â† Assets originais
â”œâ”€â”€ node_modules/
â”‚
â”œâ”€â”€ build-to-root.sh     â† Novo: Build + move para raiz
â”œâ”€â”€ move-to-root.sh      â† Novo: Move assets para raiz
â”œâ”€â”€ deploy.sh            â† Atualizado: usa raiz
â”œâ”€â”€ preview-build.sh     â† Atualizado: usa raiz
â”‚
â””â”€â”€ Arquivos gerados pelo build (ignorados pelo git):
    â”œâ”€â”€ index.html       â† Gerado
    â”œâ”€â”€ 404.html         â† Gerado
    â”œâ”€â”€ favicon.png      â† Gerado
    â”œâ”€â”€ .nojekyll        â† Gerado
    â””â”€â”€ assets/          â† Gerado
```

---

## ğŸ”„ Fluxo de Build

### 1ï¸âƒ£ Vite Build
```bash
npx vite build --base=/wellsofchange/
```
- Compila React
- Gera arquivos em `dist/public/`

### 2ï¸âƒ£ Move para Raiz
```bash
./move-to-root.sh
```
- Move arquivos de `dist/public/` para `/`
- Remove pasta `dist/`

### 3ï¸âƒ£ Resultado
```
/ (raiz)
â”œâ”€â”€ index.html
â”œâ”€â”€ 404.html
â”œâ”€â”€ favicon.png
â”œâ”€â”€ .nojekyll
â””â”€â”€ assets/
```

---

## âœ… Vantagens

### Para GitHub Pages
âœ… Assets diretamente na raiz  
âœ… Mais fÃ¡cil de fazer deploy  
âœ… Estrutura mais limpa  
âœ… CompatÃ­vel com `gh-pages` CLI  

### Para Desenvolvimento
âœ… Scripts automatizam tudo  
âœ… Build artifacts ignorados no git  
âœ… FÃ¡cil de limpar (`rm -rf assets index.html ...`)  
âœ… Processo transparente  

---

## ğŸ¯ Uso PrÃ¡tico

### Desenvolvimento Local
```bash
npm run dev
# Trabalhe normalmente, nada muda
```

### Preview do Build
```bash
./preview-build.sh
# Assets vÃ£o para raiz
# Servidor inicia na raiz
```

### Deploy
```bash
./deploy.sh
# Build â†’ Raiz â†’ Deploy
```

---

## ğŸ†˜ Troubleshooting

### Erro: "dist/public directory not found"

**Causa**: Tentou executar `move-to-root.sh` sem fazer build

**SoluÃ§Ã£o**:
```bash
# Use o script principal
./build-to-root.sh --github
```

### Assets antigos na raiz

**Causa**: Build anterior nÃ£o foi limpo

**SoluÃ§Ã£o**:
```bash
# Limpar manualmente
rm -f index.html 404.html favicon.png .nojekyll
rm -rf assets

# Reconstruir
./build-to-root.sh --github
```

### Deploy nÃ£o encontra arquivos

**Causa**: Arquivos nÃ£o estÃ£o na raiz

**SoluÃ§Ã£o**:
```bash
# Verificar se arquivos existem
ls -la index.html assets/

# Se nÃ£o existirem, reconstruir
./build-to-root.sh --github
```

---

## ğŸ“ Resumo de MudanÃ§as

| Aspecto | Antes | Agora |
|---------|-------|-------|
| **Output** | `dist/public/` | `/` (raiz) |
| **Deploy from** | `dist/public` | `.` (raiz) |
| **Build script** | `vite build` | `build-to-root.sh` |
| **Preview from** | `dist/public` | `.` (raiz) |
| **Git ignore** | `dist` | `dist` + assets raiz |

---

## ğŸ‰ Resultado Final

Agora o projeto gera os build artifacts diretamente na raiz, tornando o deploy mais simples e direto!

```bash
# Um comando faz tudo:
./deploy.sh

# Ou para testar:
./preview-build.sh
```

**Os assets ficam na raiz, prontos para GitHub Pages!** ğŸ“¦âœ¨
